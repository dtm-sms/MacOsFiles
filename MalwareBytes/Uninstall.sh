#!/bin/bash
#Script to Uninstall MalwareBytes if Falcon Sensor is already installed
#Use uninstall_reinstall.tool provided by MalwareBytes

LoggedinUser=$(id -un)
scriptname="Unistall-MalwareBytes"
alticedir="/Library/Altice/"
appsdir="/Library/Altice/Apps/"
commondir="/Library/Altice/Common/"
logdir="/Library/Altice/IntuneDTMLogs/"
logfile="Unistall-MalwareBytes.log"
logpath=$logdir/$logfile
logdirflag=1

function preparelog
{
    alticedirflag=1
    if [ ! -d "$alticedir" ]; then
        mkdir $alticedir
        alticedirflag=0
    fi
 
    if [ ! -d "$logdir" ]; then
        mkdir $logdir
        logdirflag=0
    fi
 
    echo  [$(date +"%d/%m/%Y %T")] - Begin $scriptname > $logpath
    if [ $alticedirflag -eq 0 ]; then
        Dolog "$alticedir does not exist and was created"
    fi
 
    if [ $logdirflag -eq 0 ]; then
        Dolog "$logdir does not exist and was created"
    fi
 
    if [ ! -d "$appsdir" ]; then
        mkdir $appsdir
        Dolog "$appsdir does not exist and was created"
    fi
 
    if [ ! -d "$commondir" ]; then
        mkdir $commondir
        Dolog "$commondir does not exist and was created"
    fi
 
}

function Dolog
{
    printf "[$(date +"%d/%m/%Y %T")] - $1\n" >> $logpath
}

preparelog



#osascript /tmp/m/main.scpt